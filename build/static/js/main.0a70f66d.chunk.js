(this["webpackJsonpuse-mapbox-gl-js-with-react"]=this["webpackJsonpuse-mapbox-gl-js-with-react"]||[]).push([[0],{17:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(10),s=a.n(c),i=(a(16),a(17),a(2)),o=a.n(i),l=a(11),d=a.n(l),b=a(0);var u=e=>Object(b.jsx)("div",{className:"toggle-group border border--2 border--white bg-white shadow-darken10 z1",children:e.options.map(((t,a)=>Object(b.jsxs)("label",{className:"toggle-container",children:[Object(b.jsx)("input",{onChange:()=>e.changeState(a),checked:t.layer===e.layer,name:"toggle",type:"radio"}),Object(b.jsx)("div",{className:"toggle txt-s py3 toggle--active-white",children:t.name})]},a)))});var p=e=>Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"legend bg-white mr12 mb24 py12 px12 shadow-darken10 round z1 wmax180",children:[Object(b.jsxs)("div",{className:"mb6",children:[Object(b.jsx)("h2",{className:"txt-bold txt-s block",children:e.active.name}),Object(b.jsx)("p",{className:"txt-s color-gray",children:e.active.description})]}),e.stops.map(((e,t)=>Object(b.jsxs)("div",{className:"txt-s",children:[Object(b.jsx)("span",{className:"mr6 round-full w12 h12 inline-block align-middle",style:{backgroundColor:e[1]}}),Object(b.jsx)("span",{children:"".concat(e[0].toLocaleString())})]},t)))]})});function g(){const e=Object(r.useRef)(null),t=Object(r.useRef)(null),[a,n]=Object(r.useState)(10.4515),[c,s]=Object(r.useState)(51.1657),[i,l]=Object(r.useState)(5);Object(r.useRef)(null);const g=[{name:"Key Biodiversity Areas",description:"Natura 2000 sites incl. 2 km buffer zones.",layer:"n2k-germany",stops:[["Cropland","#ecf240"],["Woodland and forest","#3d840b"],["Grassland","#e4bb07"],["Heathland and scrub","#a4c73d"],["Open spaces with little or no vegetation","#52ffb4"],["Wetland","#b472ee"],["Water","#294ffa"]]},{name:"Soil carbon",description:"Organic carbon stored in soil (g C/kg), derived from LUCAS topsoil sample dataset.",layer:"organic_carbon",stops:[["High","#dd800e"]]},{name:"Forestry",description:"Tree cover detected from satellite imagery.",layer:"national-park",stops:[["Protected forest area","#266a01"]]}],[j,m]=Object(r.useState)(g[0]);function f(e){var t=[];for(const r of g){var a={layer:r.layer,name:r.name,eligibility:!0};for(const t of e)t.layer.id===a.layer&&(a.eligibility=!1);t.push(a)}return t}Object(r.useEffect)((()=>{if(!t.current){t.current=new o.a.Map({container:e.current,style:"mapbox://styles/natk7/ckyvg82kk003b14n1tuq11p21",center:[a,c],zoom:i});var r=new d.a({accessToken:o.a.accessToken,mapboxgl:o.a});t.current.addControl(r),r.on("result",(e=>{var a="",r=f(t.current.queryRenderedFeatures(e.result.center,{layers:g.map((function(e){return e.layer}))}));for(const t of r)a+="<li>"+t.name+": "+(t.eligibility?'<b class="elig">Eligible</b>':'<b class="non-elig">Non-eligible</b>')+"</li>";if(!n)var n=new o.a.Popup({closeButton:!1}).addTo(t.current);n.setLngLat(e.result.center).setHTML(a)})),t.current.on("load",(()=>{for(const e of g)j!==e&&t.current.setPaintProperty(e.layer,"fill-opacity",0)}))}})),Object(r.useEffect)((()=>{t.current&&t.current.on("move",(()=>{n(t.current.getCenter().lng.toFixed(4)),s(t.current.getCenter().lat.toFixed(4)),l(t.current.getZoom().toFixed(2))}))})),Object(r.useEffect)((()=>{t.current&&t.current.on("click",g.map((function(e){return e.layer})),(e=>{var a=f(e.features);console.log(a);var r="";for(const t of a)r+="<li>"+t.name+": "+(t.eligibility?'<b class="elig">Eligible</b>':'<b class="non-elig">Non-eligible</b>')+"</li>";const c=e.lngLat.toArray();if(!i)var i=new o.a.Popup({closeButton:!1}).addTo(t.current);i.setLngLat(c).setHTML(r),n(c[0]),s(c[1]),l(5)}))}));return Object(b.jsxs)("div",{children:[Object(b.jsxs)("header",{className:"app-header",children:[Object(b.jsxs)("h1",{children:["Construction project validation against the DNSH Biodiversity criteria (",Object(b.jsx)("a",{href:"https://ec.europa.eu/sustainable-finance-taxonomy/activities/activity_en.htm?reference=7.1",children:"EU Taxonomy"}),")."]}),"Type in an address in the search box to validate the eligibility of a given building."]}),Object(b.jsx)("div",{ref:e,className:"map-container"}),Object(b.jsx)(p,{active:j,stops:j.stops}),Object(b.jsx)(u,{options:g,layer:j.layer,changeState:e=>{m(g[e]);for(let a=0;a<g.length;a++)e===a?t.current.setPaintProperty(g[a].layer,"fill-opacity",1):t.current.setPaintProperty(g[a].layer,"fill-opacity",0)}})]})}o.a.accessToken="pk.eyJ1IjoibmF0azciLCJhIjoiY2t5dmc0anBpMHk4bzJybzhkdGg0MHdzdCJ9.nTfTTvKc1T0IQeIZocIOQA",s.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(g,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.0a70f66d.chunk.js.map