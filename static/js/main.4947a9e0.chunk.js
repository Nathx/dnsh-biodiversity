(this["webpackJsonpuse-mapbox-gl-js-with-react"]=this["webpackJsonpuse-mapbox-gl-js-with-react"]||[]).push([[0],{17:function(e,t,r){},49:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),s=r(10),c=r.n(s),o=(r(16),r(17),r(2)),i=r.n(o),l=r(11),d=r.n(l),b=r(0);var u=e=>Object(b.jsx)("div",{className:"toggle-group border border--2 border--white bg-white shadow-darken10 z1",children:e.options.map(((t,r)=>Object(b.jsxs)("label",{className:"toggle-container",children:[Object(b.jsx)("input",{onChange:()=>e.changeState(r),checked:t.layer===e.layer,name:"toggle",type:"radio"}),Object(b.jsx)("div",{className:"toggle txt-s py3 toggle--active-white",children:t.name})]},r)))});var p=e=>Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"legend bg-white mr12 mb24 py12 px12 shadow-darken10 round z1 wmax180",children:[Object(b.jsxs)("div",{className:"mb6",children:[Object(b.jsx)("h2",{className:"txt-bold txt-s block",children:e.active.name}),Object(b.jsx)("p",{className:"txt-s color-gray",children:e.active.description})]}),e.stops.map(((e,t)=>Object(b.jsxs)("div",{className:"txt-s",children:[Object(b.jsx)("span",{className:"mr6 round-full w12 h12 inline-block align-middle",style:{backgroundColor:e[1]}}),Object(b.jsx)("span",{children:"".concat(e[0].toLocaleString())})]},t)))]})});function y(){const e=Object(a.useRef)(null),t=Object(a.useRef)(null),[r,n]=Object(a.useState)(10.4515),[s,c]=Object(a.useState)(51.1657),[o,l]=Object(a.useState)(5);Object(a.useRef)(null);const y=[{name:"Key Biodiversity Areas",description:"Natura 2000 sites incl. 2 km buffer zones.",layer:"n2k-germany",stops:[["Cropland","#ecf240"],["Woodland and forest","#3d840b"],["Grassland","#e4bb07"],["Heathland and scrub","#a4c73d"],["Open spaces with little or no vegetation","#52ffb4"],["Wetland","#b472ee"],["Water","#294ffa"]]},{name:"Soil carbon",description:"Organic carbon stored in soil (g C/kg), derived from LUCAS topsoil sample dataset.",layer:"organic_carbon",stops:[["Moderate","#ffaaaa"],["High","#ff5555"],["Very high","#ff0000"]]},{name:"Forestry",description:"Tree cover detected from satellite imagery.",layer:"national-park",stops:[["Protected forest area","#22751e"]]}],[g,f]=Object(a.useState)(y[0]),j="<strong> Address eligibility</strong>";function m(e){var t=[];for(const a of y){var r={layer:a.layer,name:a.name,eligibility:!0};for(const t of e)t.layer.id===r.layer&&(r.eligibility=!1);t.push(r)}return t}Object(a.useEffect)((()=>{if(!t.current){t.current=new i.a.Map({container:e.current,style:"mapbox://styles/natk7/ckyvg82kk003b14n1tuq11p21",center:[r,s],zoom:o});var a=new d.a({accessToken:i.a.accessToken,mapboxgl:i.a});t.current.addControl(a),a.on("result",(e=>{var r=j,a=m(t.current.queryRenderedFeatures(e.result.center,{layers:y.map((function(e){return e.layer}))}));for(const t of a)r+="<li>"+t.name+": "+(t.eligibility?"Eligible":"Non-eligible")+"</li>";if(!n)var n=new i.a.Popup({closeButton:!1}).addTo(t.current);n.setLngLat(e.result.center).setHTML(r)})),t.current.on("load",(()=>{for(const e of y)g!==e&&t.current.setPaintProperty(e.layer,"forest_types"===e.layer?"raster-opacity":"fill-opacity",0)}))}})),Object(a.useEffect)((()=>{t.current&&t.current.on("move",(()=>{n(t.current.getCenter().lng.toFixed(4)),c(t.current.getCenter().lat.toFixed(4)),l(t.current.getZoom().toFixed(2))}))})),Object(a.useEffect)((()=>{t.current&&t.current.on("click",y.map((function(e){return e.layer})),(e=>{var r=m(e.features);console.log(r);var a=j;for(const t of r)a+="<li>"+t.name+": "+(t.eligibility?"Eligible":"Non-eligible")+"</li>";const s=e.lngLat.toArray();if(!o)var o=new i.a.Popup({closeButton:!1}).addTo(t.current);o.setLngLat(s).setHTML(a),n(s[0]),c(s[1]),l(5)}))}));return Object(b.jsxs)("div",{children:[Object(b.jsxs)("header",{className:"app-header",children:[Object(b.jsxs)("h1",{children:["Construction project validation against the DNSH Biodiversity criteria (",Object(b.jsx)("a",{href:"https://ec.europa.eu/sustainable-finance-taxonomy/activities/activity_en.htm?reference=7.1",children:"EU Taxonomy"}),")."]}),"Type in an address in the search box to validate the eligibility of a given building."]}),Object(b.jsx)("div",{ref:e,className:"map-container"}),Object(b.jsx)(p,{active:g,stops:g.stops}),Object(b.jsx)(u,{options:y,layer:g.layer,changeState:e=>{f(y[e]);for(let r=0;r<y.length;r++)e===r?t.current.setPaintProperty(y[r].layer,"forest_types"===y[r].layer?"raster-opacity":"fill-opacity",1):t.current.setPaintProperty(y[r].layer,"forest_types"===y[r].layer?"raster-opacity":"fill-opacity",0)}})]})}i.a.accessToken="pk.eyJ1IjoibmF0azciLCJhIjoiY2t5dmc0anBpMHk4bzJybzhkdGg0MHdzdCJ9.nTfTTvKc1T0IQeIZocIOQA",c.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(y,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.4947a9e0.chunk.js.map